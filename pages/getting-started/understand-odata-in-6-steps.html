---
layout: page
title: Understand OData in 6 steps
date: 2014-08-01 03:44:56.000000000 +08:00
permalink: /getting-started/understand-odata-in-6-steps/
---

<style type="text/css">
.step-buttons{
    font-size: 12px;
}
.zero-bottom-margin{
    margin-bottom: 0;
}
.zero-top-margin{
    margin-top: 0;
}
.zero-bottom-padding{
    padding-bottom: 0;
}
.side-padding{
    padding-left: 30px;
    padding-right: 30px;
}
.bottom-margin{
    margin-bottom: 30px;
}
.bottom-padding{
    padding-bottom: 30px;
}
.top-padding{
    padding-top: 30px;
}
.bottom-margin{
    margin-bottom: 30px;
}
.top-margin{
    margin-top: 30px;
}
/*.bottom-border{
    border-bottom-width: 1px;
    border-bottom-color: #ddd;
    border-bottom-style: solid;
}*/
.transparent-background{
    background-color: transparent;
}
.code-row{
    border-color: #ddd;
    border-width: 1px;
    border-radius: 4px 4px 0 0;
    border-style: solid;
    padding: 15px 15px 15px;
    background-color: white;
}
.modal-body{
    max-height: 500px;
    overflow: auto;
}
.github-logo{
    float: left;
    margin-top: 10px;
    max-width: 100px;
    max-height: 100px;
}
#top-link-block.affix-top{
    position: absolute;
}
</style>


<div class="modal fade" id="step-collection-modal" tabindex="-1" role="dialog" aria-labelledby="step-collection-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-collection-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 200 OK
Content-Length: 1007
Content-Type: application/json; odata.metadata=minimal
OData-Version: 4.0
{
'@odata.context': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/$metadata#People',
'@odata.nextLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People?%24skiptoken=8',
'value': [
    {
        '@odata.id': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('russellwhyte')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('russellwhyte')',
        'UserName': 'russellwhyte',
        'FirstName': 'Russell',
        'LastName': 'Whyte',
        'Emails': [
            'Russell@example.com',
            'Russell@contoso.com',
            null
        ],
        'AddressInfo': [
            {
'Address': '187 Suffolk Ln.',
'City': {
'CountryRegion': 'United States',
'Name': 'Boise',
'Region': 'ID'
}
            },
            null
        ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('scottketchum')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('scottketchum')',
        'UserName': 'scottketchum',
        'FirstName': 'Scott',
        'LastName': 'Ketchum',
        'Emails': [
            'Scott@example.com'
        ],
        'AddressInfo': [
            {
'Address': '2817 Milton Dr.',
'City': {
'CountryRegion': 'United States',
'Name': 'Albuquerque',
'Region': 'NM'
}
            }
        ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('ronaldmundy')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('ronaldmundy')',
        'UserName': 'ronaldmundy',
        'FirstName': 'Ronald',
        'LastName': 'Mundy',
        'Emails': [
            'Ronald@example.com',
            'Ronald@contoso.com'
        ],
        'AddressInfo': [ ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('javieralfred')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('javieralfred')',
        'UserName': 'javieralfred',
        'FirstName': 'Javier',
        'LastName': 'Alfred',
        'Emails': [
            'Javier@example.com',
            'Javier@contoso.com'
        ],
        'AddressInfo': [
            {
'Address': '89 Jefferson Way Suite 2',
'City': {
'CountryRegion': 'United States',
'Name': 'Portland',
'Region': 'WA'
}
            }
        ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('willieashmore')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('willieashmore')',
        'UserName': 'willieashmore',
        'FirstName': 'Willie',
        'LastName': 'Ashmore',
        'Emails': [
            'Willie@example.com',
            'Willie@contoso.com'
        ],
        'AddressInfo': [ ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('vincentcalabrese')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('vincentcalabrese')',
        'UserName': 'vincentcalabrese',
        'FirstName': 'Vincent',
        'LastName': 'Calabrese',
        'Emails': [
            'Vincent@example.com',
            'Vincent@contoso.com'
        ],
        'AddressInfo': [
            {
'Address': '55 Grizzly Peak Rd.',
'City': {
'CountryRegion': 'United States',
'Name': 'Butte',
'Region': 'MT'
}
            }
        ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('clydeguess')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('clydeguess')',
        'UserName': 'clydeguess',
        'FirstName': 'Clyde',
        'LastName': 'Guess',
        'Emails': [
            'Clyde@example.com'
        ],
        'AddressInfo': [ ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('keithpinckney')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('keithpinckney')',
        'UserName': 'keithpinckney',
        'FirstName': 'Keith',
        'LastName': 'Pinckney',
        'Emails': [
            'Keith@example.com',
            'Keith@contoso.com'
        ],
        'AddressInfo': [ ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    }
]
}
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary btn-copy-code" onclick="copyCode()">Click to Copy Response</button>
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
<div id="feedback" aria-live="assertive" role="alert"></div>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-individual-modal" tabindex="-1" role="dialog" aria-labelledby="step-individual-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-individual-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 200 OK
Content-Length: 482
Content-Type: application/json; odata.metadata=minimal
ETag: W/'08D1D5BE987DE78B'
OData-Version: 4.0
{
'@odata.context': 'https://services.odata.org/V4/(S(ak3ckilwx5ajembdktfunu0v))/TripPinServiceRW/$metadata#People/$entity',
'@odata.id': 'https://services.odata.org/V4/(S(ak3ckilwx5ajembdktfunu0v))/TripPinServiceRW/People('russellwhyte')',
'@odata.etag': 'W/'08D1D5BE987DE78B'',
'@odata.editLink': 'https://services.odata.org/V4/(S(ak3ckilwx5ajembdktfunu0v))/TripPinServiceRW/People('russellwhyte')',
'UserName': 'russellwhyte',
'FirstName': 'Russell',
'LastName': 'Whyte',
'Emails': [
    'Russell@example.com',
    'Russell@contoso.com',
    null
],
'AddressInfo': [
    {
        'Address': '187 Suffolk Ln.',
        'City': {
            'CountryRegion': 'United States',
            'Name': 'Boise',
            'Region': 'ID'
        }
    },
    null
],
'Gender': 'Male',
'Concurrency': 635524037014841200
}
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary btn-copy-code" aria-live="assertive" onclick="copyCode()">Click to Copy Response</button>
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
<div id="feedback" aria-live="assertive" role="alert"></div>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-query-modal" tabindex="-1" role="dialog" aria-labelledby="step-query-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-query-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 200 OK
Content-Length: 367
Content-Type: application/json; odata.metadata=minimal
OData-Version: 4.0
{
'@odata.context': 'https://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/$metadata#People(FirstName,LastName)',
'value': [
    {
        '@odata.id': 'https://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/People('scottketchum')',
        '@odata.etag': 'W/'08D1D5BEF93F01A6'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/People('scottketchum')',
        'FirstName': 'Scott',
        'LastName': 'Ketchum'
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/People('ronaldmundy')',
        '@odata.etag': 'W/'08D1D5BEF93F01A6'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/People('ronaldmundy')',
        'FirstName': 'Ronald',
        'LastName': 'Mundy'
    }
]
}
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary btn-copy-code" aria-live="assertive" onclick="copyCode()">Click to Copy Response</button>
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
<div id="feedback" aria-live="assertive" role="alert"></div>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-post-modal" tabindex="-1" role="dialog" aria-labelledby="step-post-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-post-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 201 Created
Content-Length: 652
Content-Type: application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
ETag: W/'08D1D3800FC572E3'
Location: https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('lewisblack')
OData-Version: 4.0
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary btn-copy-code" aria-live="assertive" onclick="copyCode()">Click to Copy Response</button>
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
<div id="feedback" aria-live="assertive" role="alert"></div>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-relationship-modal" tabindex="-1" role="dialog" aria-labelledby="step-relationship-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-relationship-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 204 No Content
OData-Version: 4.0
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary btn-copy-code" aria-live="assertive" onclick="copyCode()">Click to Copy Response</button>
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
<div id="feedback" aria-live="assertive" role="alert"></div>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-function-modal" tabindex="-1" role="dialog" aria-labelledby="step-function-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-function-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 200 OK
Content-Length: 582
Content-Type: application/json; odata.metadata=minimal
OData-Version: 4.0
{
'@odata.context': 'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/$metadata#People',
'value': [
    {
        '@odata.id': 'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')',
        '@odata.etag': 'W/'08D1D5BFB48CE017'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')',
        'UserName': 'russellwhyte',
        'FirstName': 'Russell',
        'LastName': 'Whyte',
        'Emails': [
            'Russell@example.com',
            'Russell@contoso.com',
            null
        ],
        'AddressInfo': [
            {
'Address': '187 Suffolk Ln.',
'City': {
'CountryRegion': 'United States',
'Name': 'Boise',
'Region': 'ID'
}
            },
            null
        ],
        'Gender': 'Male',
        'Concurrency': 635524041780551700
    },
    {
        '@odata.id': 'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('scottketchum')',
        '@odata.etag': 'W/'08D1D5BFB48CE017'',
        '@odata.editLink': 'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('scottketchum')',
        'UserName': 'scottketchum',
        'FirstName': 'Scott',
        'LastName': 'Ketchum',
        'Emails': [
            'Scott@example.com'
        ],
        'AddressInfo': [
            {
'Address': '2817 Milton Dr.',
'City': {
'CountryRegion': 'United States',
'Name': 'Albuquerque',
'Region': 'NM'
}
            }
        ],
        'Gender': 'Male',
        'Concurrency': 635524041780551700
    }
]
}
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-secondary btn-copy-code" aria-live="assertive" onclick="copyCode()">Click to Copy Response</button>
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
<div id="feedback" aria-live="assertive" role="alert"></div>
            </div>
</p></div>
</p></div>
</div>



<div class="bottom-border">
<p class="text-justify bottom-margin">OData (Open Data Protocol) is an <a href="https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=odata">OASIS standard</a> that defines the best practice for building and consuming RESTful APIs. OData helps you focus on your business logic while building RESTful APIs without having to worry about the approaches to define request and response headers, status codes, HTTP methods, URL conventions, media types, payload formats and query options etc. OData also guides you about tracking changes, defining functions/actions for reusable procedures and sending asynchronous/batch requests etc. Additionally, OData provides facility for extension to fulfil any custom needs of your RESTful APIs.</p>
<p class="text-justify bottom-margin">OData RESTful APIs are easy to consume. The OData metadata, a machine-readable description of the data model of the APIs, enables the creation of powerful generic client proxies and tools. Some of them can help you interact with OData even without knowing anything about the protocol. The following 6 steps demonstrate 6 interesting scenarios of OData consumption across different programming platforms. But if you are a non-developer and would like to simply play with OData, <a href="https://pragmatiqa.com/xodata/">XOData</a> is the best start for you.</p>
</p></div>
<div class="bottom-border">
<h3 class="top-margin bottom-margin">Step 1: Requesting resources
        </h3>
<p class="text-justify bottom-margin">As the REST principles go, "Everything is a Resource". As a simple start, let's see how resources can be retrieved from the OData RESTful APIs. The sample service used is the TripPin service which simulates the service of an open trip management system. Our friend, Russell Whyte, who has formerly registered TripPin, would like to find out who are the other people in it.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a class="tab-link"  href="#http1" role="tab" aria-controls="http1"  data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a class="tab-link dropdown-toggle"  href="#csharp1" role="tab" id="csharpDrop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-controls="csharpDrop1-contents">C# &nbsp;<span
            class="caret"></span></a></p>
<ul role="presentation" class="dropdown-menu tab-link" id="csharpDrop1-contents">
<li><a class="tab-link"  href="#csharpCodeGen1" role="tab" id="csharpCodeGen1-tab" data-toggle="tab" aria-controls="csharpCodeGen1">OData v4 Client Code Generator</a></li>
<li><a class="tab-link"  href="#csharpSimpleOData1" role="tab" id="csharpSimpleOData1-tab" data-toggle="tab" aria-controls="csharpSimpleOData1">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a class="tab-link"  href="#olingo-js-1" role="tab" aria-controls="olingo-js-1" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a class="tab-link"  href="#odatacpp-1" role="tab" aria-controls="odatacpp-1" data-toggle="tab">C++</a></li>
<li role="presentation"><a class="tab-link"  href="#nodejs-1" role="tab" aria-controls="nodejs-1" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a class="tab-link" href="#contribute-1" role="tab" aria-controls="contribute-1" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http1">
{% highlight js %}
GET https://services.odata.org/v4/TripPinServiceRW/People HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-collection-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen1" aria-labelledby="csharpCodeGen1-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("https://services.odata.org/v4/TripPinServiceRW/"));
var people = context.People.Execute();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData1" aria-labelledby="csharpSimpleOData1-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var people = await client.For<People>().FindEntriesAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var people = await client.For(x.People).FindEntriesAsync();
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-1">
{% highlight js %}
var serviceRoot = 'https://services.odata.org/V4/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var request = {
    requestUri: serviceRoot + 'People',
    method: 'GET',
    headers: headers,
    data: null
};
odatajs.oData.request(
    request,
    function (data, response) {
        var people = data.value;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="https://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-1">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto people = service_context->create_people_query()->execute_query().get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by Bin Xu.
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-1">
{% highlight js %}
var http = require('http');
var serviceRoot = 'https://services.odata.org/v4/TripPinServiceRW/';
getURL(serviceRoot + 'People');
function getURL(url) {
    var body = '';
    http.get(url, function (response) {
        response.on('data', function (chunk) {
            body+=chunk;
        });
        response.on('end', function () {
            console.log(body);
        });
    }).on('error', function(e) {
        console.log('ERROR: ' + e.message);
    });
}
{% endhighlight %}
Download and install the Node.js platform from <a href="https://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-1">
<img class="github-logo" alt="GitHub logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border">
<h3 class="top-margin bottom-margin">Step 2: Requesting an individual resource
        </h3>
<p class="text-justify bottom-margin">REST principles also say, that every resource is identified by a unique identifier. OData also enables defining key properties of a resource and retrieving it using the keys. In this step, Russell wants to find the information about himself by specifying his username as the key.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a class="tab-link" href="#http2" role="tab" aria-controls="http2" data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a class="tab-link dropdown-toggle" href="#csharp2" role="tab" id="csharpDrop2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-controls="csharpDrop2-contents">C# &nbsp;<span
            class="caret"></span></a></p>
<ul role="presentation" class="dropdown-menu tab-link" id="csharpDrop2-contents">
<li><a class="tab-link" href="#csharpCodeGen2" role="tab" id="csharpCodeGen2-tab" data-toggle="tab" aria-controls="csharpCodeGen2">OData v4 Client Code Generator</a></li>
<li><a class="tab-link" href="#csharpSimpleOData2" role="tab" id="csharpSimpleOData2-tab" data-toggle="tab" aria-controls="csharpSimpleOData2">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a class="tab-link" href="#olingo-js-2" role="tab" aria-controls="olingo-js-2" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a class="tab-link" href="#odatacpp-2" role="tab" aria-controls="odatacpp-2" data-toggle="tab">C++</a></li>
<li role="presentation"><a class="tab-link" href="#nodejs-2" role="tab" aria-controls="nodejs-2" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a class="tab-link" href="#contribute-2" role="tab" aria-controls="contribute-2" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http2">
{% highlight js %}
GET https://services.odata.org/v4/TripPinServiceRW/People('russellwhyte') HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-individual-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen2" aria-labelledby="csharpCodeGen2-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("https://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var person = context.People.ByKey(userName: "russellwhyte").GetValue();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData2" aria-labelledby="csharpSimpleOData2-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var person = await client.For<People>().Key("russellwhyte").FindEntryAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var person = await client.For(x.People).Key("russellwhyte").FindEntryAsync();
Assert.Equal("russellwhyte", person.UserName);
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-2">
{% highlight js %}
var serviceRoot = 'https://services.odata.org/V4/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var request = {
    requestUri: serviceRoot + 'People('russellwhyte')',
    method: 'GET',
    headers: headers,
    data: null
};
odatajs.oData.request(
    request,
    function (data, response) {
    var russell = data;
    },
    function (err) {
    alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="https://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-2">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto people = service_context->create_people_query()->key(U("russellwhyte"))->execute_query().get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-2">
{% highlight js %}
var http = require('http');
var serviceRoot = 'https://services.odata.org/v4/TripPinServiceRW/';
getURL(serviceRoot + 'People('russellwhyte')');
function getURL(url) {
    var body = '';
    http.get(url, function (response) {
        response.on('data', function (chunk) {
            body+=chunk;
        });
        response.on('end', function () {
            console.log(body);
        });
    }).on('error', function(e) {
        console.log('ERROR: ' + e.message);
    });
}
{% endhighlight %}
Download and install the Node.js platform from <a href="https://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-2">
<img class="github-logo" alt="GitHub logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border">
<h3 class="top-margin bottom-margin">Step 3: Queries
        </h3>
<p class="text-justify bottom-margin">As an architecture that's built on top of the current features of the Web, RESTful APIs can also support query strings. For that, OData defines a series of system query options that can help you construct complicated queries for the resources you want. With the help of that, our friend Russell can find out the first 2 persons in the system who have registered at least one trip that costs more than 3000, and only display their first name and last name.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a class="tab-link" href="#http3" role="tab" aria-controls="http3" data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a class="tab-link dropdown-toggle" href="#csharp3" role="tab" id="csharpDrop3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-controls="csharpDrop3-contents">C#
          &nbsp;<span class="caret"></span></a></p>
<ul role="presentation" class="dropdown-menu tab-link" id="csharpDrop3-contents">
<li><a class="tab-link" href="#csharpCodeGen3" role="tab" id="csharpCodeGen3-tab" data-toggle="tab" aria-controls="csharpCodeGen3">OData v4 Client Code Generator</a></li>
<li><a class="tab-link" href="#csharpSimpleOData3" role="tab" id="csharpSimpleOData3-tab" data-toggle="tab" aria-controls="csharpSimpleOData3">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a class="tab-link" href="#olingo-js-3" role="tab" aria-controls="olingo-js-3" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a class="tab-link" href="#odatacpp-3" role="tab" aria-controls="odatacpp-3" data-toggle="tab">C++</a></li>
<li role="presentation"><a class="tab-link" href="#nodejs-3" role="tab" aria-controls="nodejs-3" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a class="tab-link" href="#contribute-3" role="tab" aria-controls="contribute-3" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http3">
{% highlight js %}
GET https://services.odata.org/v4/TripPinServiceRW/People?$top=2 &amp; $select=FirstName, LastName &amp; $filter=Trips/any(d:d/Budget gt 3000) HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-query-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen3" aria-labelledby="csharpCodeGen3-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("https://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var people = context.People.Where(c => c.Trips.Any(d => d.Budget > 3000)).Take(2).Select(c => new {c.FirstName, c.LastName});
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData3" aria-labelledby="csharpSimpleOData3-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var people = await client.For<People>()
    .Filter(x => x.Trips.Any(y=> y.Budget > 3000))
    .Top(2)
    .Select(x => new {x.FirstName, x.LastName})
    .FindEntriesAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var people = await client
    .For(x.People)
    .Filter(x.Trips.Any(x.Budget > 3000))
    .Top(2)
    .Select(x.FirstName, x.LastName)
    .FindEntriesAsync() as IEnumerable<dynamic>;
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>.The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-3">
{% highlight js %}
var serviceRoot = 'https://services.odata.org/V4/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var request = {
    requestUri: serviceRoot + 'People?$top=2 & $filter=Trips/any(d:d/Budget gt 3000)',
    method: 'GET',
    headers: headers,
    data: null
};
odatajs.oData.request(
    request,
    function (data, response) {
    var filtedPeople = data.value;
    var FirstName = filtedPeople[0].FirstName;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="https://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-3">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto people = service_context->create_people_query()->filter(U("Trips/any(d:d/Budget gt 3000)"))->select(U("FirstName, LastName"))->top(2)->execute_query().get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-3">
{% highlight js %}
var http = require('http');
var serviceRoot = 'https://services.odata.org/v4/TripPinServiceRW/';
getURL(serviceRoot + 'People?$top=2 & $select=FirstName, LastName & $filter=Trips/any(d:d/Budget gt 3000)');
function getURL(url) {
    var body = '';
    http.get(url, function (response) {
        response.on('data', function (chunk) {
            body+=chunk;
        });
        response.on('end', function () {
            console.log(body);
        });
    }).on('error', function(e) {
        console.log('ERROR: ' + e.message);
    });
}
{% endhighlight %}
Download and install the Node.js platform from <a href="https://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-3">
<img class="github-logo" alt="GitHub logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border">
<h3 class="top-margin bottom-margin">Step 4: Creating a new resource
        </h3>
<p class="text-justify bottom-margin">REST principles require the using of simple and uniform interfaces. With that regard, OData clients can expect unified interfaces of the resources. The stateless transfer of representations in REST are carried out by using different HTTP methods in the requests. After having gone through the first 3 steps, Russell thinks the system is useful. He wants to add his best friend Lewis to the system. He finds out that all he needs to do is to send a POST request containing a JSON representation of Lewis' information to the same interface from which he requested the people information.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a class="tab-link" href="#http4" role="tab" aria-controls="http4"  data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a class="tab-link dropdown-toggle" href="#csharp4" role="tab" id="csharpDrop4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-controls="csharpDrop4-contents">C# &nbsp;<span
            class="caret"></span></a></p>
<ul role="presentation" class="dropdown-menu tab-link" id="csharpDrop4-contents">
<li><a class="tab-link" href="#csharpCodeGen4" role="tab" id="csharpCodeGen4-tab" data-toggle="tab" aria-controls="csharpCodeGen4">OData v4 Client Code Generator</a></li>
<li><a class="tab-link" href="#csharpSimpleOData4" role="tab" id="csharpSimpleOData4-tab" data-toggle="tab" aria-controls="csharpSimpleOData4">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a class="tab-link" href="#olingo-js-4" role="tab" aria-controls="olingo-js-4" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a class="tab-link" href="#odatacpp-4" role="tab" aria-controls="odatacpp-4" data-toggle="tab">C++</a></li>
<li role="presentation"><a class="tab-link" href="#nodejs-4" role="tab" aria-controls="nodejs-4" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a class="tab-link" href="#contribute-4" role="tab" aria-controls="contribute-4" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http4">
{% highlight js %}
POST https://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
Content-Length: 428
Content-Type: application/json
{
    'UserName':'lewisblack',
    'FirstName':'Lewis',
    'LastName':'Black',
    'Emails':[
        'lewisblack@example.com'
    ],
    'AddressInfo':[
        {
            Address: '187 Suffolk Ln.',
            City: {
CountryRegion: 'United States',
Name: 'Boise',
Region: 'ID'
            }
        }
    ],
    'Gender': 'Male',
    'Concurrency':635519729375200400
}
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-post-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen4" aria-labelledby="csharpCodeGen4-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("https://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var lewis = new Person()
{
    UserName = "lewisblack",
    FirstName = "Lewis",
    LastName = "Black",
    Emails = new ObservableCollection<string>() {"lewisblack@example.com"},
    AddressInfo =
        new ObservableCollection<Location>()
        {
            new Location()
            {
Address = "187 Suffolk Ln.",
City = new City() {CountryRegion = "United States", Name = "Boise", Region = "ID"}
            }
        },
    Gender = PersonGender.Male,
    Concurrency = 635519729375200400
};
context.AddObject("People", lewis);
context.SaveChanges();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData4" aria-labelledby="csharpSimpleOData4-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var person = await client
    .For<People>()
    .Set(new People()
    {
        UserName = "lewisblack",
        FirstName = "Lewis",
        LastName = "Black",
        Emails = new [] { "lewisblack@example.com" },
        AddressInfo = new []
        {
            new Location()
            {
Address = "187 Suffolk Ln.",
City = new City
{
CountryRegion = "United States",
Name = "Boise",
Region = "ID"
}
            }
        },
        Gender = PersonGender.Male,
        Concurrency = 635519729375200400
    })
    .InsertEntryAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var person = await client
    .For(x.People)
    .Set(new
    {
        UserName = "lewisblack",
        FirstName = "Lewis",
        LastName = "Black",
        Emails = new[] { "lewisblack@example.com" },
        AddressInfo = new[]
        {
            new
            {
Address = "187 Suffolk Ln.",
City = new
{
CountryRegion = "United States",
Name = "Boise",
Region = "ID"
}
            }
        },
        Gender = PersonGender.Male,
        Concurrency = 635519729375200400
    })
    .InsertEntryAsync();
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-4">
{% highlight js %}
var serviceRoot = 'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var newPerson = {
    UserName:'lewisblack',
    FirstName:'Lewis',
    LastName:'Black',
    Emails:[
        'lewisblack@example.com'
    ],
    AddressInfo:[
        {
            Address: '187 Suffolk Ln.',
            City: {
CountryRegion: 'United States',
Name: 'Boise',
Region: 'ID'
            }
        }
    ],
    Gender: 'Male'
};
var request = {
    requestUri: serviceRoot + 'People',
    method: 'POST',
    headers: headers,
    data: newPerson
};
odatajs.oData.request(
    request,
    function (data, response) {
        var createeRes = response;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="https://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-4">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto lewis = std::make_shared<Person>(service_context);
lewis->set_username(U("lewisblack"));
lewis->set_firstname(U("Lewis"));
lewis->set_lastname(U("Black"));
lewis->set_emails({ U("lewisblack@example.com") });
auto location = std::make_shared<Location>(service_context);
location->set_address(U("187 Suffolk Ln."));
auto city = std::make_shared<City>(service_context);
city->set_countryregion(U("United States"));
city->set_name(U("Boise"));
city->set_region(U("ID"));
location->set_city(city);
lewis->set_addressinfo({ location });
lewis->set_gender(PersonGender::Male);
lewis->set_concurrency(635519729375200400);
service_context->add_object(U("People"), lewis).get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-4">
{% highlight js %}
var http = require('http');
var serviceHost = 'services.odata.org';
var servicePath = '/v4/TripPinServiceRW/';
var newPerson = {
    UserName:'lewisblack',
    FirstName:'Lewis',
    LastName:'Black',
    Emails:[
        'lewisblack@example.com'
    ],
    AddressInfo:[
        {
            Address: '187 Suffolk Ln.',
            City: {
CountryRegion: 'United States',
Name: 'Boise',
Region: 'ID'
            }
        }
    ],
    Gender: 'Male'
};
var postData = JSON.stringify(newPerson);
var options = {
    hostname: serviceHost,
    path: servicePath + 'People',
    port: 80,
    method: 'POST',
    headers: {
        'OData-Version': '4.0',
        'OData-MaxVersion': '4.0',
        'Content-Type': 'application/json',
        'Content-Length': postData.length
    }
};
var req = http.request(options, function(res) {
    var body = '';
    res.on('data', function (chunk) {
        body += chunk;
    });
    res.on('end', function () {
        console.log(body);
    });
});
req.on('error', function(e) {
    console.log('ERROR: ' + e.message);
});
req.write(postData);
req.end();
{% endhighlight %}
Download and install the Node.js platform from <a href="https://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-4">
<img class="github-logo" alt="GitHub logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border">
<h3 class="top-margin bottom-margin">Step 5: Relating resources
        </h3>
<p class="text-justify bottom-margin">In RESTful APIs, resources are usually dependent with each other. For that, the concept of relationships in OData can be defined among resources to add flexibility and richness to the data model. For example, in the TripPin OData service, people are related to the trips that they've booked using the system. Knowing that, Russell would like to invite Lewis to his existing trip in the U.S. by relating that trip to Lewis.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a class="tab-link" href="#http5" role="tab" aria-controls="http5"  data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a class="tab-link dropdown-toggle" href="#csharp5" role="tab" id="csharpDrop5" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-controls="csharpDrop5-contents">C# &nbsp;<span
            class="caret"></span></a></p>
<ul role="presentation" class="dropdown-menu tab-link" id="csharpDrop5-contents">
<li><a class="tab-link" href="#csharpCodeGen5" role="tab" id="csharpCodeGen5-tab" data-toggle="tab" aria-controls="csharpCodeGen5">OData v4 Client Code Generator</a></li>
<li><a class="tab-link" href="#csharpSimpleOData5" role="tab" id="csharpSimpleOData5-tab" data-toggle="tab" aria-controls="csharpSimpleOData5">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a class="tab-link" href="#olingo-js-5" role="tab" aria-controls="olingo-js-5" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a class="tab-link" href="#odatacpp-5" role="tab" aria-controls="odatacpp-5" data-toggle="tab">C++</a></li>
<li role="presentation"><a class="tab-link" href="#nodejs-5" role="tab" aria-controls="nodejs-5" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a class="tab-link" href="#contribute-5" role="tab" aria-controls="contribute-5" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http5">
{% highlight js %}
POST https://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('lewisblack')/Trips/$ref HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
Content-Length: 123
Content-Type: application/json
{
    '@odata.id':'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')/Trips(0)'
}
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-relationship-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen5" aria-labelledby="csharpCodeGen5-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("https://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var trip = context.People.ByKey(userName: "russellwhyte").Trips.ByKey(tripId: 0).GetValue();
var dsc = new DataServiceCollection<Person>(context)
{
    context.People.ByKey(userName: "lewisblack").GetValue()
};
dsc[0].Trips.Add(trip);</p>
<p>context.SaveChanges();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData5" aria-labelledby="csharpSimpleOData5-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var trip = await client
    .For<People>()
    .Key("russellwhyte")
    .NavigateTo<Trip>()
    .Key(0)
    .FindEntryAsync();
await client
    .For<People>()
    .Key("scottketchum")
    .LinkEntryAsync(trip);
var person = await client
    .For<People>()
    .Key("scottketchum")
    .Expand(x => x.Trips)
    .FindEntryAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var trip = await client
    .For(x.People)
    .Key("russellwhyte")
    .NavigateTo(x.Trips)
    .Key(0)
    .FindEntryAsync();
await client
    .For(x.People)
    .Key("scottketchum")
    .LinkEntryAsync(x.Trips, trip);
var person = await client
    .For(x.People)
    .Key("scottketchum")
    .Expand(x.Trips)
    .FindEntryAsync();
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-5">
{% highlight js %}
var serviceRoot = 'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var relateBody = {
    '@odata.id':'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')/Trips(0)'
};
var request = {
    requestUri: serviceRoot + 'People('lewisblack')/Trips/$ref',
    method: 'POST',
    headers: headers,
    data: relateBody
};
odatajs.oData.request(
    request,
    function (data, response) {
        var res = response;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="https://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-5">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto lewis = service_context->create_people_query()->key(U("lewisblack"))->execute_query().get()[0];
auto russell = service_context->create_people_query()->key(U("russellwhyte"))->expand(U("Trips"))->execute_query().get()[0];
auto trip = russell->get_trips()[0];
service_context->add_reference(lewis, U("Trips"), trip).get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-5">
{% highlight js %}
var http = require('http');
var serviceHost = 'services.odata.org';
var servicePath = '/v4/TripPinServiceRW/';
var postData = JSON.stringify({
    '@odata.id': 'https://services.odata.org/V4/TripPinServiceRW/People('russellwhyte')/Trips(0)'
});
var options = {
    hostname: serviceHost,
    path: servicePath + 'People('lewisblack')/Trips/$ref',
    port: 80,
    method: 'POST',
    headers: {
        'OData-Version': '4.0',
        'OData-MaxVersion': '4.0',
        'Content-Type': 'application/json',
        'Content-Length': postData.length
    }
};
var req = http.request(options, function(res) {
    var body = '';
    res.on('data', function (chunk) {
        body += chunk;
    });
    res.on('end', function () {
        console.log(body);
    });
});
req.on('error', function(e) {
    console.log('problem with request: ' + e.message);
});
req.write(postData);
req.end();
{% endhighlight %}
Download and install the Node.js platform from <a href="https://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-5">
<img class="github-logo" alt="GitHub logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border">
<h3 class="top-margin bottom-margin">Step 6: Invoking a function
        </h3>
<p class="text-justify bottom-margin">In RESTful APIs, there can be some custom operations that contain complicated logic and can be frequently used. For that purpose, OData supports defining functions and actions to represent such operations. They are also resources themselves and can be bound to existing resources. After having explored the TripPin OData service, Russell finds out that the it has a function called GetInvolvedPeople from which he can find out the involved people of a specific trip. He invokes the function to find out who else other than him and Lewis goes to that trip in the U.S.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a class="tab-link" href="#http6" role="tab" aria-controls="http6"  data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a class="tab-link dropdown-toggle" href="#csharp6" role="tab" id="csharpDrop6" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-controls="csharpDrop1-contents">C# &nbsp;<span
            class="caret"></span></a></p>
<ul role="presentation" class="dropdown-menu tab-link" id="csharpDrop6-contents">
<li><a class="tab-link" href="#csharpCodeGen6" role="tab" id="csharpCodeGen6-tab" data-toggle="tab" aria-controls="csharpCodeGen6">OData v4 Client Code Generator</a></li>
<li><a class="tab-link" href="#csharpSimpleOData6" role="tab" id="csharpSimpleOData6-tab" data-toggle="tab" aria-controls="csharpSimpleOData6">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a class="tab-link" href="#olingo-js-6" role="tab" aria-controls="olingo-js-6" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a class="tab-link" href="#odatacpp-6" role="tab" aria-controls="odatacpp-6" data-toggle="tab">C++</a></li>
<li role="presentation"><a class="tab-link" href="#nodejs-6" role="tab" aria-controls="nodejs-6" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a class="tab-link" href="#contribute-6" role="tab" aria-controls="contribute-6" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http6">
{% highlight js %}
GET https://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')/Trips(0)/Microsoft.OData.SampleService.Models.TripPin.GetInvolvedPeople()
HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-function-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen6" aria-labelledby="csharpCodeGen6-tab">
{% highlight csharp %}
var context = new DefaultContainer(new
Uri("https://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var trip = context.People.ByKey(userName: "russellwhyte").Trips.ByKey(tripId: 0).GetValue();
var people = trip.GetInvolvedPeople().Execute();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData6" aria-labelledby="csharpSimpleOData6-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var people = await client
    .For<People>()
    .Key("scottketchum")
    .NavigateTo<Trip>()
    .Key(0)
    .Function("GetInvolvedPeople")
    .ExecuteAsEnumerableAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("https://services.odata.org/v4/TripPinServiceRW/");
var people = await client
    .For(x.People)
    .Key("scottketchum")
    .NavigateTo(x.Trips)
    .Key(0)
    .Function("GetInvolvedPeople")
    .ExecuteAsEnumerableAsync() as IEnumerable<dynamic>;
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-6">
{% highlight js %}
var serviceRoot = 'https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var request = {
    requestUri: serviceRoot + 'People('russellwhyte')/Trips(0)/Microsoft.OData.SampleService.Models.TripPin.GetInvolvedPeople()',
    method: 'GET',
    headers: headers,
    data: null
};
odatajs.oData.request(
    request,
    function (data, response) {
        var involvedPeople = data.value;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="https://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-6">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("https://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto russell = service_context->create_people_query()->key(U("russellwhyte"))->expand(U("Trips"))->execute_query().get()[0];
auto trip = russell->get_trips()[0];
auto people = trip->GetInvolvedPeople().get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-6">
{% highlight js %}
var http = require('http');
var serviceRoot = 'https://services.odata.org/v4/TripPinServiceRW/';
getURL(serviceRoot + 'People('russellwhyte')/Trips(0)/Microsoft.OData.SampleService.Models.TripPin.GetInvolvedPeople()');
function getURL(url) {
    var body = '';
    http.get(url, function (response) {
        response.on('data', function (chunk) {
            body+=chunk;
        });
        response.on('end', function () {
            console.log(body);
        });
    }).on('error', function(e) {
        console.log('ERROR: ' + e.message);
    });
}
{% endhighlight %}
Download and install the Node.js platform from <a href="https://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-6">
<img class="github-logo" alt="GitHub logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<script>
    $(document).ready(function() {
        $('.modal').on('shown.bs.modal', function () {
            $('.close').focus();
            trapFocus(this)
            $(this).find(".modal-body").attr("tabindex", -1);
       });
       
        // make it possible to tab to response content inside popups for keyboard users
        $(".modal-body pre").attr("tabindex", 0);
        $(".modal-title").attr("tabindex", -1);
        
        // hack to get the screen reader to read the syntax-highlighted
        // code section on Microsoft Edge
        $('.modal-body').each(function (i, modalBody) {
            // extract plain code text form syntax-highlighted code section
            var plainCode = "";
            $(modalBody).find("pre span").each(function (spanIndex, span) {
                plainCode += span.textContent + ' ';
            });
                   
            var codeBlock= $(modalBody).find("pre");
            codeBlock.attr('aria-label', plainCode);

            // first child will be the figure with the <pre> tag inside. Make it non-focusable.
            var firstChild = modalBody.firstChild;
            firstChild.attr('tabindex', -1)
        });
    });
       
    //function to trap focus within the pop up window.
    function trapFocus(element) {
        var focusableElements = element.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),
        firstFocusableElement = focusableElements[0];  
        lastFocusableElement = focusableElements[focusableElements.length - 1];
        KEYCODE_TAB = 9;

        element.addEventListener('keydown', function(e) {
            var isTabPressed = (e.key === 'Tab' || e.keyCode === KEYCODE_TAB);

            if (!isTabPressed) { 
                return; 
            }

            if ( e.shiftKey )
            {
                if (document.activeElement === firstFocusableElement) 
                {
                    lastFocusableElement.focus();
                    e.preventDefault();
                }
            } 
            else
            {
                if (document.activeElement === lastFocusableElement) 
                {
                    firstFocusableElement.focus();
                    e.preventDefault();
                }
            }

        });
    }

    // Select all text in a modal when Ctrl+A is pressed
    $(document).keydown(function(e) {
        e.preventDefault();
        
        // This script listens for a keydown event and checks if the 'Ctrl' key and the 'a' key are pressed simultaneously.
        // If the condition is met, it prevents the default action and selects the contents of any visible modal's body.
        // Check if the modal is open
        if (e.ctrlKey && (e.key === 'a' || e.key === 'A') && $('.modal:visible .modal-body').length) {
            $('.modal:visible .modal-body').each(function() {
                var modalBody = $('.modal:visible .modal-body');
                modalBody.focus();

                // Create a range to select the content within the modal body
                var range = document.createRange();
                range.selectNodeContents(modalBody[0]);

                // Get the current selection and remove any existing ranges
                var selection = window.getSelection();
                selection.removeAllRanges();

                // Add the new range to the selection
                selection.addRange(range);
            });
        }
    });

    // Copy code to clipboard
    function copyCode() {
        // Loop through each modal
        document.querySelectorAll('.modal').forEach(function(modal) {
            // Check if the modal is currently open
            if (modal.style.display === 'block') {
                var body = modal.querySelector('.modal-body');

                var range = document.createRange();
                range.selectNodeContents(body);
                // Get the current selection and remove any existing ranges
                var selection = window.getSelection();
                selection.removeAllRanges();
                // Add the new range to the selection
                selection.addRange(range);

                document.execCommand("copy");

                // Provide feedback to the user

                $('#feedback').text('Response code copied to clipboard.').show();

                // Hide the feedback after 3 seconds
                setTimeout(function() {
                    $('#feedback').fadeOut('slow');
                }, 3000);

                // focus on the modal body to show the user that the content has been copied
                body.focus();
            }
        });
    }
</script>
