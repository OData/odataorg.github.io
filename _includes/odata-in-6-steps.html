<link rel="stylesheet" href="{{site.url}}/public/css/home.css">

<div class="modal fade" id="step-collection-modal" tabindex="-1" role="dialog" aria-labelledby="step-collection-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-collection-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 200 OK
Content-Length: 1007
Content-Type: application/json; odata.metadata=minimal
OData-Version: 4.0
{
'@odata.context': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/$metadata#People',
'@odata.nextLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People?%24skiptoken=8',
'value': [
    {
        '@odata.id': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('russellwhyte')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('russellwhyte')',
        'UserName': 'russellwhyte',
        'FirstName': 'Russell',
        'LastName': 'Whyte',
        'Emails': [
            'Russell@example.com',
            'Russell@contoso.com',
            null
        ],
        'AddressInfo': [
            {
'Address': '187 Suffolk Ln.',
'City': {
'CountryRegion': 'United States',
'Name': 'Boise',
'Region': 'ID'
}
            },
            null
        ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('scottketchum')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('scottketchum')',
        'UserName': 'scottketchum',
        'FirstName': 'Scott',
        'LastName': 'Ketchum',
        'Emails': [
            'Scott@example.com'
        ],
        'AddressInfo': [
            {
'Address': '2817 Milton Dr.',
'City': {
'CountryRegion': 'United States',
'Name': 'Albuquerque',
'Region': 'NM'
}
            }
        ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('ronaldmundy')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('ronaldmundy')',
        'UserName': 'ronaldmundy',
        'FirstName': 'Ronald',
        'LastName': 'Mundy',
        'Emails': [
            'Ronald@example.com',
            'Ronald@contoso.com'
        ],
        'AddressInfo': [ ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('javieralfred')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('javieralfred')',
        'UserName': 'javieralfred',
        'FirstName': 'Javier',
        'LastName': 'Alfred',
        'Emails': [
            'Javier@example.com',
            'Javier@contoso.com'
        ],
        'AddressInfo': [
            {
'Address': '89 Jefferson Way Suite 2',
'City': {
'CountryRegion': 'United States',
'Name': 'Portland',
'Region': 'WA'
}
            }
        ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('willieashmore')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('willieashmore')',
        'UserName': 'willieashmore',
        'FirstName': 'Willie',
        'LastName': 'Ashmore',
        'Emails': [
            'Willie@example.com',
            'Willie@contoso.com'
        ],
        'AddressInfo': [ ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('vincentcalabrese')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('vincentcalabrese')',
        'UserName': 'vincentcalabrese',
        'FirstName': 'Vincent',
        'LastName': 'Calabrese',
        'Emails': [
            'Vincent@example.com',
            'Vincent@contoso.com'
        ],
        'AddressInfo': [
            {
'Address': '55 Grizzly Peak Rd.',
'City': {
'CountryRegion': 'United States',
'Name': 'Butte',
'Region': 'MT'
}
            }
        ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('clydeguess')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('clydeguess')',
        'UserName': 'clydeguess',
        'FirstName': 'Clyde',
        'LastName': 'Guess',
        'Emails': [
            'Clyde@example.com'
        ],
        'AddressInfo': [ ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('keithpinckney')',
        '@odata.etag': 'W/'08D1D5BD423E5158'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(a2k31bgwiyejn2j2iiybvq4p))/TripPinServiceRW/People('keithpinckney')',
        'UserName': 'keithpinckney',
        'FirstName': 'Keith',
        'LastName': 'Pinckney',
        'Emails': [
            'Keith@example.com',
            'Keith@contoso.com'
        ],
        'AddressInfo': [ ],
        'Gender': 'Male',
        'Concurrency': 635524031272866200
    }
]
}
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-individual-modal" tabindex="-1" role="dialog" aria-labelledby="step-individual-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-individual-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 200 OK
Content-Length: 482
Content-Type: application/json; odata.metadata=minimal
ETag: W/'08D1D5BE987DE78B'
OData-Version: 4.0
{
'@odata.context': 'http://services.odata.org/V4/(S(ak3ckilwx5ajembdktfunu0v))/TripPinServiceRW/$metadata#People/$entity',
'@odata.id': 'http://services.odata.org/V4/(S(ak3ckilwx5ajembdktfunu0v))/TripPinServiceRW/People('russellwhyte')',
'@odata.etag': 'W/'08D1D5BE987DE78B'',
'@odata.editLink': 'http://services.odata.org/V4/(S(ak3ckilwx5ajembdktfunu0v))/TripPinServiceRW/People('russellwhyte')',
'UserName': 'russellwhyte',
'FirstName': 'Russell',
'LastName': 'Whyte',
'Emails': [
    'Russell@example.com',
    'Russell@contoso.com',
    null
],
'AddressInfo': [
    {
        'Address': '187 Suffolk Ln.',
        'City': {
            'CountryRegion': 'United States',
            'Name': 'Boise',
            'Region': 'ID'
        }
    },
    null
],
'Gender': 'Male',
'Concurrency': 635524037014841200
}
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-query-modal" tabindex="-1" role="dialog" aria-labelledby="step-query-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-query-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 200 OK
Content-Length: 367
Content-Type: application/json; odata.metadata=minimal
OData-Version: 4.0
{
'@odata.context': 'http://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/$metadata#People(FirstName,LastName)',
'value': [
    {
        '@odata.id': 'http://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/People('scottketchum')',
        '@odata.etag': 'W/'08D1D5BEF93F01A6'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/People('scottketchum')',
        'FirstName': 'Scott',
        'LastName': 'Ketchum'
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/People('ronaldmundy')',
        '@odata.etag': 'W/'08D1D5BEF93F01A6'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(cn0zbczilimhpqbgnre0usaz))/TripPinServiceRW/People('ronaldmundy')',
        'FirstName': 'Ronald',
        'LastName': 'Mundy'
    }
]
}
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-post-modal" tabindex="-1" role="dialog" aria-labelledby="step-post-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-post-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 201 Created
Content-Length: 652
Content-Type: application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
ETag: W/'08D1D3800FC572E3'
Location: http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('lewisblack')
OData-Version: 4.0
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-relationship-modal" tabindex="-1" role="dialog" aria-labelledby="step-relationship-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-relationship-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 204 No Content
OData-Version: 4.0
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
</p></div>
</p></div>
</div>
<div class="modal fade" id="step-function-modal" tabindex="-1" role="dialog" aria-labelledby="step-function-modal-label" aria-hidden="true">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></p>
<h4 class="modal-title" id="step-function-modal-label">Response</h4>
</p></div>
<div class="modal-body">
{% highlight js %}
HTTP/1.1 200 OK
Content-Length: 582
Content-Type: application/json; odata.metadata=minimal
OData-Version: 4.0
{
'@odata.context': 'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/$metadata#People',
'value': [
    {
        '@odata.id': 'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')',
        '@odata.etag': 'W/'08D1D5BFB48CE017'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')',
        'UserName': 'russellwhyte',
        'FirstName': 'Russell',
        'LastName': 'Whyte',
        'Emails': [
            'Russell@example.com',
            'Russell@contoso.com',
            null
        ],
        'AddressInfo': [
            {
'Address': '187 Suffolk Ln.',
'City': {
'CountryRegion': 'United States',
'Name': 'Boise',
'Region': 'ID'
}
            },
            null
        ],
        'Gender': 'Male',
        'Concurrency': 635524041780551700
    },
    {
        '@odata.id': 'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('scottketchum')',
        '@odata.etag': 'W/'08D1D5BFB48CE017'',
        '@odata.editLink': 'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('scottketchum')',
        'UserName': 'scottketchum',
        'FirstName': 'Scott',
        'LastName': 'Ketchum',
        'Emails': [
            'Scott@example.com'
        ],
        'AddressInfo': [
            {
'Address': '2817 Milton Dr.',
'City': {
'CountryRegion': 'United States',
'Name': 'Albuquerque',
'Region': 'NM'
}
            }
        ],
        'Gender': 'Male',
        'Concurrency': 635524041780551700
    }
]
}
{% endhighlight %}
            </p></div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
</p></div>
</p></div>
</div>



<div class="bottom-border side-padding">
<h2 class="text-center top-margin bottom-margin">Understanding OData in 6 steps</h2>
<p class="text-justify bottom-margin">OData (Open Data Protocol) is an <a href="https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=odata">OASIS standard</a> that defines the best practice for building and consuming RESTful APIs. OData helps you focus on your business logic while building RESTful APIs without having to worry about the approaches to define request and response headers, status codes, HTTP methods, URL conventions, media types, payload formats and query options etc. OData also guides you about tracking changes, defining functions/actions for reusable procedures and sending asynchronous/batch requests etc. Additionally, OData provides facility for extension to fulfil any custom needs of your RESTful APIs.</p>
<p class="text-justify bottom-margin">OData RESTful APIs are easy to consume. The OData metadata, a machine-readable description of the data model of the APIs, enables the creation of powerful generic client proxies and tools. Some of them can help you interact with OData even without knowing anything about the protocol. The following 6 steps demonstrate 6 interesting scenarios of OData consumption across different programming platforms. But if you are a non-developer and would like to simply play with OData, <a href="http://pragmatiqa.com/xodata/">XOData</a> is the best start for you.</p>
</p></div>
<div class="bottom-border side-padding">
<h3 class="top-margin bottom-margin text-center">Step 1: Requesting resources
        </h3>
<p class="text-justify bottom-margin">As the REST principles go, "Everything is a Resource". As a simple start, let's see how resources can be retrieved from the OData RESTful APIs. The sample service used is the TripPin service which simulates the service of an open trip management system. Our friend, Russell White, who has formerly registered TripPin, would like to find out who are the other people in it.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a href="#http1" aria-controls="http1" role="tab" data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a href="#csharp1" id="csharpDrop1" class="dropdown-toggle" data-toggle="dropdown" aria-controls="csharpDrop1-contents">C# &nbsp;<span class="caret"></span></a></p>
<ul class="dropdown-menu" role="menu" aria-labelledby="csharpDrop1" id="csharpDrop1-contents">
<li><a href="#csharpCodeGen1" tabindex="-1" role="tab" id="csharpCodeGen1-tab" data-toggle="tab" aira-controls="csharpCodeGen1">OData v4 Client Code Generator</a></li>
<li><a href="#csharpSimpleOData1" tabindex="-1" role="tab" id="csharpSimpleOData1-tab" data-toggle="tab" aira-controls="csharpSimpleOData1">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a href="#olingo-js-1" aria-controls="olingo-js-1" role="tab" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a href="#odatacpp-1" aria-controls="odatacpp-1" role="tab" data-toggle="tab">C++</a></li>
<li role="presentation"><a href="#nodejs-1" aria-controls="nodejs-1" role="tab" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a href="#contribute-1" aria-controls="contribute-1" role="tab" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http1">
{% highlight js %}
GET http://services.odata.org/v4/TripPinServiceRW/People HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-collection-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen1" aria-labelledby="csharpCodeGen1-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("http://services.odata.org/v4/TripPinServiceRW/"));
var people = context.People.Execute();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData1" aria-labelledby="csharpSimpleOData1-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var people = await client.For<People>().FindEntriesAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var people = await client.For(x.People).FindEntriesAsync();
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-1">
{% highlight js %}
var serviceRoot = 'http://services.odata.org/V4/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var request = {
    requestUri: serviceRoot + 'People',
    method: 'GET',
    headers: headers,
    data: null
};
odatajs.oData.request(
    request,
    function (data, response) {
        var people = data.value;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="http://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-1">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto people = service_context->create_people_query()->execute_query().get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-1">
{% highlight js %}
var http = require('http');
var serviceRoot = 'http://services.odata.org/v4/TripPinServiceRW/';
getURL(serviceRoot + '/People');
function getURL(url) {
    var body = '';
    http.get(url, function (response) {
        response.on('data', function (chunk) {
            body+=chunk;
        });
        response.on('end', function () {
            console.log(body);
        });
    }).on('error', function(e) {
        console.log('ERROR: ' + e.message);
    });
}
{% endhighlight %}
Download and install the Node.js platform from <a href="http://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-1">
<img class="github-logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border side-padding">
<h3 class="top-margin bottom-margin text-center">Step 2: Requesting an individual resource
        </h3>
<p class="text-justify bottom-margin">REST principles also say, that every resource is identified by a unique identifier. OData also enables defining key properties of a resource and retrieving it using the keys. In this step, Russell wants to find the information about himself by specifying his username as the key.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a href="#http2" aria-controls="http2" role="tab" data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a href="#csharp2" id="csharpDrop2" class="dropdown-toggle" data-toggle="dropdown" aria-controls="csharpDrop2-contents">C# &nbsp;<span class="caret"></span></a></p>
<ul class="dropdown-menu" role="menu" aria-labelledby="csharpDrop1" id="csharpDrop2-contents">
<li><a href="#csharpCodeGen2" tabindex="-1" role="tab" id="csharpCodeGen2-tab" data-toggle="tab" aira-controls="csharpCodeGen2">OData v4 Client Code Generator</a></li>
<li><a href="#csharpSimpleOData2" tabindex="-1" role="tab" id="csharpSimpleOData2-tab" data-toggle="tab" aira-controls="csharpSimpleOData2">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a href="#olingo-js-2" aria-controls="olingo-js-2" role="tab" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a href="#odatacpp-2" aria-controls="odatacpp-2" role="tab" data-toggle="tab">C++</a></li>
<li role="presentation"><a href="#nodejs-2" aria-controls="nodejs-2" role="tab" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a href="#contribute-2" aria-controls="contribute-2" role="tab" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http2">
{% highlight js %}
GET http://services.odata.org/v4/TripPinServiceRW/People('russellwhyte') HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-individual-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen2" aria-labelledby="csharpCodeGen2-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("http://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var person = context.People.ByKey(userName: "russellwhyte").GetValue();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData2" aria-labelledby="csharpSimpleOData2-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var person = await client.For<People>().Key("russellwhyte").FindEntryAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var person = await client.For(x.People).Key("russellwhyte").FindEntryAsync();
Assert.Equal("russellwhyte", person.UserName);
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-2">
{% highlight js %}
var serviceRoot = 'http://services.odata.org/V4/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var request = {
    requestUri: serviceRoot + 'People('russellwhyte')',
    method: 'GET',
    headers: headers,
    data: null
};
odatajs.oData.request(
    request,
    function (data, response) {
    var russell = data;
    },
    function (err) {
    alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="http://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-2">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto people = service_context->create_people_query()->key(U("russellwhyte"))->execute_query().get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-2">
{% highlight js %}
var http = require('http');
var serviceRoot = 'http://services.odata.org/v4/TripPinServiceRW/';
getURL(serviceRoot + 'People('russellwhyte')');
function getURL(url) {
    var body = '';
    http.get(url, function (response) {
        response.on('data', function (chunk) {
            body+=chunk;
        });
        response.on('end', function () {
            console.log(body);
        });
    }).on('error', function(e) {
        console.log('ERROR: ' + e.message);
    });
}
{% endhighlight %}
Download and install the Node.js platform from <a href="http://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-2">
<img class="github-logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border side-padding">
<h3 class="top-margin bottom-margin text-center">Step 3: Queries
        </h3>
<p class="text-justify bottom-margin">As an architecture that's built on top of the current features of the Web, RESTful APIs can also support query strings. For that, OData defines a series of system query options that can help you construct complicated queries for the resources you want. With the help of that, our friend Russell can find out the first 2 persons in the system who have registered at least one trip that costs more than 3000, and only display their first name and last name.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a href="#http3" aria-controls="http3" role="tab" data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a href="#csharp3" id="csharpDrop3" class="dropdown-toggle" data-toggle="dropdown" aria-controls="csharpDrop3-contents">C# &nbsp;<span class="caret"></span></a></p>
<ul class="dropdown-menu" role="menu" aria-labelledby="csharpDrop3" id="csharpDrop3-contents">
<li><a href="#csharpCodeGen3" tabindex="-1" role="tab" id="csharpCodeGen3-tab" data-toggle="tab" aira-controls="csharpCodeGen3">OData v4 Client Code Generator</a></li>
<li><a href="#csharpSimpleOData3" tabindex="-1" role="tab" id="csharpSimpleOData3-tab" data-toggle="tab" aira-controls="csharpSimpleOData3">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a href="#olingo-js-3" aria-controls="olingo-js-3" role="tab" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a href="#odatacpp-3" aria-controls="odatacpp-3" role="tab" data-toggle="tab">C++</a></li>
<li role="presentation"><a href="#nodejs-3" aria-controls="nodejs-3" role="tab" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a href="#contribute-3" aria-controls="contribute-3" role="tab" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http3">
{% highlight js %}
GET http://services.odata.org/v4/TripPinServiceRW/People?$top=2 &amp; $select=FirstName, LastName &amp; $filter=Trips/any(d:d/Budget gt 3000) HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-query-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen3" aria-labelledby="csharpCodeGen3-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("http://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var people = context.People.Where(c => c.Trips.Any(d => d.Budget > 3000)).Take(2).Select(c => new {c.FirstName, c.LastName});
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData3" aria-labelledby="csharpSimpleOData3-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var people = await client.For<People>()
    .Filter(x => x.Trips.Any(y=> y.Budget > 3000))
    .Top(2)
    .Select(x => new {x.FirstName, x.LastName})
    .FindEntriesAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var people = await client
    .For(x.People)
    .Filter(x.Trips.Any(x.Budget > 3000))
    .Top(2)
    .Select(x.FirstName, x.LastName)
    .FindEntriesAsync() as IEnumerable<dynamic>;
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>.The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-3">
{% highlight js %}
var serviceRoot = 'http://services.odata.org/V4/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var request = {
    requestUri: serviceRoot + 'People?$top=2 & $filter=Trips/any(d:d/Budget gt 3000)',
    method: 'GET',
    headers: headers,
    data: null
};
odatajs.oData.request(
    request,
    function (data, response) {
    var filtedPeople = data.value;
    var FirstName = filtedPeople[0].FirstName;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="http://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-3">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto people = service_context->create_people_query()->filter(U("Trips/any(d:d/Budget gt 3000)"))->select(U("FirstName, LastName"))->top(2)->execute_query().get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-3">
{% highlight js %}
var http = require('http');
var serviceRoot = 'http://services.odata.org/v4/TripPinServiceRW/';
getURL(serviceRoot + 'People?$top=2 & $select=FirstName, LastName & $filter=Trips/any(d:d/Budget gt 3000)');
function getURL(url) {
    var body = '';
    http.get(url, function (response) {
        response.on('data', function (chunk) {
            body+=chunk;
        });
        response.on('end', function () {
            console.log(body);
        });
    }).on('error', function(e) {
        console.log('ERROR: ' + e.message);
    });
}
{% endhighlight %}
Download and install the Node.js platform from <a href="http://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-3">
<img class="github-logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border side-padding">
<h3 class="top-margin bottom-margin text-center">Step 4: Creating a new resource
        </h3>
<p class="text-justify bottom-margin">REST principles require the using of simple and uniform interfaces. With that regard, OData clients can expect unified interfaces of the resources. The stateless tranfer of representations in REST are carried out by using different HTTP methods in the requests. After having gone through the first 3 steps, Russell thinks the system is useful. He wants to add his best friend Lewis to the system. He finds out that all he needs to do is to send a POST request containing a JSON representation of Lewis' information to the same interface from which he requested the people information.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a href="#http4" aria-controls="http4" role="tab" data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a href="#csharp4" id="csharpDrop4" class="dropdown-toggle" data-toggle="dropdown" aria-controls="csharpDrop4-contents">C# &nbsp;<span class="caret"></span></a></p>
<ul class="dropdown-menu" role="menu" aria-labelledby="csharpDrop4" id="csharpDrop4-contents">
<li><a href="#csharpCodeGen4" tabindex="-1" role="tab" id="csharpCodeGen4-tab" data-toggle="tab" aira-controls="csharpCodeGen4">OData v4 Client Code Generator</a></li>
<li><a href="#csharpSimpleOData4" tabindex="-1" role="tab" id="csharpSimpleOData4-tab" data-toggle="tab" aira-controls="csharpSimpleOData4">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a href="#olingo-js-4" aria-controls="olingo-js-4" role="tab" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a href="#odatacpp-4" aria-controls="odatacpp-4" role="tab" data-toggle="tab">C++</a></li>
<li role="presentation"><a href="#nodejs-4" aria-controls="nodejs-4" role="tab" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a href="#contribute-4" aria-controls="contribute-4" role="tab" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http4">
{% highlight js %}
POST http://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
Content-Length: 428
Content-Type: application/json
{
    'UserName':'lewisblack',
    'FirstName':'Lewis',
    'LastName':'Black',
    'Emails':[
        'lewisblack@example.com'
    ],
    'AddressInfo':[
        {
            Address: '187 Suffolk Ln.',
            City: {
CountryRegion: 'United States',
Name: 'Boise',
Region: 'ID'
            }
        }
    ],
    'Gender': 'Male',
    'Concurrency':635519729375200400
}
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-post-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen4" aria-labelledby="csharpCodeGen4-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("http://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var lewis = new Person()
{
    UserName = "lewisblack",
    FirstName = "Lewis",
    LastName = "Black",
    Emails = new ObservableCollection<string>() {"lewisblack@example.com"},
    AddressInfo =
        new ObservableCollection<Location>()
        {
            new Location()
            {
Address = "187 Suffolk Ln.",
City = new City() {CountryRegion = "United States", Name = "Boise", Region = "ID"}
            }
        },
    Gender = PersonGender.Male,
    Concurrency = 635519729375200400
};
context.AddObject("People", lewis);
context.SaveChanges();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData4" aria-labelledby="csharpSimpleOData4-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var person = await client
    .For<People>()
    .Set(new People()
    {
        UserName = "lewisblack",
        FirstName = "Lewis",
        LastName = "Black",
        Emails = new [] { "lewisblack@example.com" },
        AddressInfo = new []
        {
            new Location()
            {
Address = "187 Suffolk Ln.",
City = new City
{
CountryRegion = "United States",
Name = "Boise",
Region = "ID"
}
            }
        },
        Gender = PersonGender.Male,
        Concurrency = 635519729375200400
    })
    .InsertEntryAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var person = await client
    .For(x.People)
    .Set(new
    {
        UserName = "lewisblack",
        FirstName = "Lewis",
        LastName = "Black",
        Emails = new[] { "lewisblack@example.com" },
        AddressInfo = new[]
        {
            new
            {
Address = "187 Suffolk Ln.",
City = new
{
CountryRegion = "United States",
Name = "Boise",
Region = "ID"
}
            }
        },
        Gender = PersonGender.Male,
        Concurrency = 635519729375200400
    })
    .InsertEntryAsync();
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-4">
{% highlight js %}
var serviceRoot = 'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var newPerson = {
    UserName:'lewisblack',
    FirstName:'Lewis',
    LastName:'Black',
    Emails:[
        'lewisblack@example.com'
    ],
    AddressInfo:[
        {
            Address: '187 Suffolk Ln.',
            City: {
CountryRegion: 'United States',
Name: 'Boise',
Region: 'ID'
            }
        }
    ],
    Gender: 'Male'
};
var request = {
    requestUri: serviceRoot + 'People',
    method: 'POST',
    headers: headers,
    data: newPerson
};
odatajs.oData.request(
    request,
    function (data, response) {
        var createeRes = response;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="http://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-4">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto lewis = std::make_shared<Person>(service_context);
lewis->set_username(U("lewisblack"));
lewis->set_firstname(U("Lewis"));
lewis->set_lastname(U("Black"));
lewis->set_emails({ U("lewisblack@example.com") });
auto location = std::make_shared<Location>(service_context);
location->set_address(U("187 Suffolk Ln."));
auto city = std::make_shared<City>(service_context);
city->set_countryregion(U("United States"));
city->set_name(U("Boise"));
city->set_region(U("ID"));
location->set_city(city);
lewis->set_addressinfo({ location });
lewis->set_gender(PersonGender::Male);
lewis->set_concurrency(635519729375200400);
service_context->add_object(U("People"), lewis).get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-4">
{% highlight js %}
var http = require('http');
var serviceHost = 'services.odata.org';
var servicePath = '/v4/TripPinServiceRW/';
var newPerson = {
    UserName:'lewisblack',
    FirstName:'Lewis',
    LastName:'Black',
    Emails:[
        'lewisblack@example.com'
    ],
    AddressInfo:[
        {
            Address: '187 Suffolk Ln.',
            City: {
CountryRegion: 'United States',
Name: 'Boise',
Region: 'ID'
            }
        }
    ],
    Gender: 'Male'
};
var postData = JSON.stringify(newPerson);
var options = {
    hostname: serviceHost,
    path: servicePath + 'People',
    port: 80,
    method: 'POST',
    headers: {
        'OData-Version': '4.0',
        'OData-MaxVersion': '4.0',
        'Content-Type': 'application/json',
        'Content-Length': postData.length
    }
};
var req = http.request(options, function(res) {
    var body = '';
    res.on('data', function (chunk) {
        body += chunk;
    });
    res.on('end', function () {
        console.log(body);
    });
});
req.on('error', function(e) {
    console.log('ERROR: ' + e.message);
});
req.write(postData);
req.end();
{% endhighlight %}
Download and install the Node.js platform from <a href="http://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-4">
<img class="github-logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border side-padding">
<h3 class="top-margin bottom-margin text-center">Step 5: Relating resources
        </h3>
<p class="text-justify bottom-margin">In RESTful APIs, resources are usually dependent with each other. For that, the concept of relationships in OData can be defined among resources to add flexibility and richness to the data model. For example, in the TripPin OData service, people are related to the trips that they've booked using the system. Knowing that, Russell would like to invite Lewis to his existing trip in the U.S. by relating that trip to Lewis.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a href="#http5" aria-controls="http5" role="tab" data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a href="#csharp5" id="csharpDrop5" class="dropdown-toggle" data-toggle="dropdown" aria-controls="csharpDrop5-contents">C# &nbsp;<span class="caret"></span></a></p>
<ul class="dropdown-menu" role="menu" aria-labelledby="csharpDrop5" id="csharpDrop5-contents">
<li><a href="#csharpCodeGen5" tabindex="-1" role="tab" id="csharpCodeGen5-tab" data-toggle="tab" aira-controls="csharpCodeGen5">OData v4 Client Code Generator</a></li>
<li><a href="#csharpSimpleOData5" tabindex="-1" role="tab" id="csharpSimpleOData5-tab" data-toggle="tab" aira-controls="csharpSimpleOData5">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a href="#olingo-js-5" aria-controls="olingo-js-5" role="tab" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a href="#odatacpp-5" aria-controls="odatacpp-5" role="tab" data-toggle="tab">C++</a></li>
<li role="presentation"><a href="#nodejs-5" aria-controls="nodejs-5" role="tab" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a href="#contribute-5" aria-controls="contribute-5" role="tab" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http5">
{% highlight js %}
POST http://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('lewisblack')/Trips/$ref HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
Content-Length: 123
Content-Type: application/json
{
    '@odata.id':'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')/Trips(0)'
}
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-relationship-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen5" aria-labelledby="csharpCodeGen5-tab">
{% highlight csharp %}
var context = new DefaultContainer(new Uri("http://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var trip = context.People.ByKey(userName: "russellwhyte").Trips.ByKey(tripId: 0).GetValue();
var dsc = new DataServiceCollection<Person>(context)
{
    context.People.ByKey(userName: "lewisblack").GetValue()
};
dsc[0].Trips.Add(trip);</p>
<p>context.SaveChanges();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData5" aria-labelledby="csharpSimpleOData5-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var trip = await client
    .For<People>()
    .Key("russellwhyte")
    .NavigateTo<Trip>()
    .Key(0)
    .FindEntryAsync();
await client
    .For<People>()
    .Key("scottketchum")
    .LinkEntryAsync(trip);
var person = await client
    .For<People>()
    .Key("scottketchum")
    .Expand(x => x.Trips)
    .FindEntryAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var trip = await client
    .For(x.People)
    .Key("russellwhyte")
    .NavigateTo(x.Trips)
    .Key(0)
    .FindEntryAsync();
await client
    .For(x.People)
    .Key("scottketchum")
    .LinkEntryAsync(x.Trips, trip);
var person = await client
    .For(x.People)
    .Key("scottketchum")
    .Expand(x.Trips)
    .FindEntryAsync();
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-5">
{% highlight js %}
var serviceRoot = 'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var relateBody = {
    '@odata.id':'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')/Trips(0)'
};
var request = {
    requestUri: serviceRoot + 'People('lewisblack')/Trips/$ref',
    method: 'POST',
    headers: headers,
    data: relateBody
};
odatajs.oData.request(
    request,
    function (data, response) {
        var res = response;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="http://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-5">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto lewis = service_context->create_people_query()->key(U("lewisblack"))->execute_query().get()[0];
auto russell = service_context->create_people_query()->key(U("russellwhyte"))->expand(U("Trips"))->execute_query().get()[0];
auto trip = russell->get_trips()[0];
service_context->add_reference(lewis, U("Trips"), trip).get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-5">
{% highlight js %}
var http = require('http');
var serviceHost = 'services.odata.org';
var servicePath = '/v4/TripPinServiceRW/';
var postData = JSON.stringify({
    '@odata.id': 'http://services.odata.org/V4/TripPinServiceRW/People('russellwhyte')/Trips(0)'
});
var options = {
    hostname: serviceHost,
    path: servicePath + 'People('lewisblack')/Trips/$ref',
    port: 80,
    method: 'POST',
    headers: {
        'OData-Version': '4.0',
        'OData-MaxVersion': '4.0',
        'Content-Type': 'application/json',
        'Content-Length': postData.length
    }
};
var req = http.request(options, function(res) {
    var body = '';
    res.on('data', function (chunk) {
        body += chunk;
    });
    res.on('end', function () {
        console.log(body);
    });
});
req.on('error', function(e) {
    console.log('problem with request: ' + e.message);
});
req.write(postData);
req.end();
{% endhighlight %}
Download and install the Node.js platform from <a href="http://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-5">
<img class="github-logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>
<div class="bottom-border side-padding">
<h3 class="top-margin bottom-margin text-center">Step 6: Invoking a function
        </h3>
<p class="text-justify bottom-margin">In RESTful APIs, there can be some custom operations that contain complicated logic and can be frequently used. For that purpose, OData supports defining functions and actions to represent such operations. They are also resources themselves and can be bound to existing resources. After having explored the TripPin OData service, Russell finds out that the it has a function called GetInvolvedPeople from which he can find out the involved people of a specific trip. He invokes the function to find out who else other than him and Lewis goes to that trip in the U.S.</p>
<div class="code-row bottom-margin">
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a href="#http6" aria-controls="http6" role="tab" data-toggle="tab">HTTP request</a></li>
<li role="presentation" class="dropdown">
<a href="#csharp6" id="csharpDrop6" class="dropdown-toggle" data-toggle="dropdown" aria-controls="csharpDrop1-contents">C# &nbsp;<span class="caret"></span></a></p>
<ul class="dropdown-menu" role="menu" aria-labelledby="csharpDrop6" id="csharpDrop6-contents">
<li><a href="#csharpCodeGen6" tabindex="-1" role="tab" id="csharpCodeGen6-tab" data-toggle="tab" aira-controls="csharpCodeGen6">OData v4 Client Code Generator</a></li>
<li><a href="#csharpSimpleOData6" tabindex="-1" role="tab" id="csharpSimpleOData6-tab" data-toggle="tab" aira-controls="csharpSimpleOData6">Simple.OData.Client</a></li>
</ul>
</li>
<li role="presentation"><a href="#olingo-js-6" aria-controls="olingo-js-6" role="tab" data-toggle="tab">Olingo JavaScript client</a></li>
<li role="presentation"><a href="#odatacpp-6" aria-controls="odatacpp-6" role="tab" data-toggle="tab">C++</a></li>
<li role="presentation"><a href="#nodejs-6" aria-controls="nodejs-6" role="tab" data-toggle="tab">Node.js</a></li>
<li role="presentation"><a href="#contribute-6" aria-controls="contribute-6" role="tab" data-toggle="tab">Contribute</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="http6">
{% highlight js %}
GET http://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/People('russellwhyte')/Trips(0)/Microsoft.OData.SampleService.Models.TripPin.GetInvolvedPeople()
HTTP/1.1
OData-Version: 4.0
OData-MaxVersion: 4.0
{% endhighlight %}
<button class="btn btn-primary step-buttons" data-toggle="modal" data-target="#step-function-modal">View the response</button>
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpCodeGen6" aria-labelledby="csharpCodeGen6-tab">
{% highlight csharp %}
var context = new DefaultContainer(new
Uri("http://services.odata.org/v4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
var trip = context.People.ByKey(userName: "russellwhyte").Trips.ByKey(tripId: 0).GetValue();
var people = trip.GetInvolvedPeople().Execute();
{% endhighlight %}
The client library used is the <a href="https://visualstudiogallery.msdn.microsoft.com/9b786c0e-79d1-4a50-89a5-125e57475937">OData v4 Client Code Generator</a>.
</div>
<div role="tabpanel" class="tab-pane fade" id="csharpSimpleOData6" aria-labelledby="csharpSimpleOData6-tab">
<b>Typed syntax</b>
{% highlight csharp %}
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var people = await client
    .For<People>()
    .Key("scottketchum")
    .NavigateTo<Trip>()
    .Key(0)
    .Function("GetInvolvedPeople")
    .ExecuteAsEnumerableAsync();
{% endhighlight %}
<b>Dynamic syntax</b>
{% highlight csharp %}
var x = ODataDynamic.Expression;
var client = new ODataClient("http://services.odata.org/v4/TripPinServiceRW/");
var people = await client
    .For(x.People)
    .Key("scottketchum")
    .NavigateTo(x.Trips)
    .Key(0)
    .Function("GetInvolvedPeople")
    .ExecuteAsEnumerableAsync() as IEnumerable<dynamic>;
{% endhighlight %}
The client library used is the <a href="https://github.com/object/Simple.OData.Client/wiki">Simple.OData.Client</a>. The code is contributed by <a href="https://github.com/object">Vagif Abilov</a>
</div>
<div role="tabpanel" class="tab-pane" id="olingo-js-6">
{% highlight js %}
var serviceRoot = 'http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/';
var headers = { 'Content-Type': 'application/json', Accept: 'application/json' };
var request = {
    requestUri: serviceRoot + 'People('russellwhyte')/Trips(0)/Microsoft.OData.SampleService.Models.TripPin.GetInvolvedPeople()',
    method: 'GET',
    headers: headers,
    data: null
};
odatajs.oData.request(
    request,
    function (data, response) {
        var involvedPeople = data.value;
    },
    function (err) {
        alert('Fail: ' + err.Message);
    }
);
{% endhighlight %}
The client library used is the <a href="http://olingo.apache.org/doc/javascript/index.html">Olingo OData Client for JavaScript</a>.
</div>
<div role="tabpanel" class="tab-pane" id="odatacpp-6">
{% highlight cpp %}
auto service_context = std::make_shared<DefaultContainer>(U("http://services.odata.org/V4/(S(34wtn2c0hkuk5ekg0pjr513b))/TripPinServiceRW/"));
auto russell = service_context->create_people_query()->key(U("russellwhyte"))->expand(U("Trips"))->execute_query().get()[0];
auto trip = russell->get_trips()[0];
auto people = trip->GetInvolvedPeople().get();
{% endhighlight %}
The client library used is the <a href="https://github.com/odata/odatacpp-client">ODataCpp Client</a>. The code is contributed by <a href="https://github.com/bixu-ms">Bin Xu</a>
</div>
<div role="tabpanel" class="tab-pane" id="nodejs-6">
{% highlight js %}
var http = require('http');
var serviceRoot = 'http://services.odata.org/v4/TripPinServiceRW/';
getURL(serviceRoot + 'People('russellwhyte')/Trips(0)/Microsoft.OData.SampleService.Models.TripPin.GetInvolvedPeople()');
function getURL(url) {
    var body = '';
    http.get(url, function (response) {
        response.on('data', function (chunk) {
            body+=chunk;
        });
        response.on('end', function () {
            console.log(body);
        });
    }).on('error', function(e) {
        console.log('ERROR: ' + e.message);
    });
}
{% endhighlight %}
Download and install the Node.js platform from <a href="http://nodejs.org">nodejs.org</a> then run the snippets below using the node command. The code is contributed by <a href="https://github.com/markpete">Mark Peterson</a>
</div>
<div role="tabpanel" class="tab-pane" id="contribute-6">
<img class="github-logo" src="assets/Octocat.png" /></p>
<h4>Contribute to "Understanding OData in 6 steps"</h4>
<p>Want to contribute code snippet for another platform or suggest changes to this content? You can edit and submit changes to "Understanding OData in 6 steps" on its <a href="https://github.com/ODataOrg/home-samples" target="_blank">Github repository</a>.
</div>
</p></div>
</p></div>
</p></div>